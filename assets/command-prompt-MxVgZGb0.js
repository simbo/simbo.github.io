import{_ as n}from"./index-JZR1_N_v.js";import{_}from"./dynamic-import-helper-0gtGTknh.js";const l=new Map,v=["clear","color-theme","colors","commands","echo","hello","help","man","maximize","minimize","reload","type","version"],E={cls:"clear",hey:"hello",hi:"hello",max:"maximize",min:"minimize",print:"echo",theme:"color-theme"},h={foo:{handler:"bar"},test:{handler:"test passed."}},O=/^[a-z][\da-z]*(-[a-z][\da-z]*)*$/i;async function y(e){if(!O.test(e))throw new Error(`invalid command: ${e}`);if(e=e.toLowerCase(),e=E[e]||e,h[e])return h[e];if(!l.has(e)){let t;try{t=(await _(Object.assign({"./command-modules/clear.ts":()=>n(()=>import("./clear-OU53t_ln.js"),__vite__mapDeps([])),"./command-modules/color-theme.ts":()=>n(()=>import("./color-theme-H0hR7A1t.js"),__vite__mapDeps([0,1,2])),"./command-modules/colors.ts":()=>n(()=>import("./colors-GAqgv6UU.js"),__vite__mapDeps([])),"./command-modules/commands.ts":()=>n(()=>import("./commands-sjpjJy-n.js"),__vite__mapDeps([3,4,1,2,5])),"./command-modules/echo.ts":()=>n(()=>import("./echo-5iZpBI2u.js"),__vite__mapDeps([])),"./command-modules/hello.ts":()=>n(()=>import("./hello-XD6-5wdJ.js"),__vite__mapDeps([])),"./command-modules/help.ts":()=>n(()=>import("./help-XZkRtNGc.js"),__vite__mapDeps([])),"./command-modules/man.ts":()=>n(()=>import("./man-1iwAyI3J.js"),__vite__mapDeps([6,4,7,1,2,5])),"./command-modules/maximize.ts":()=>n(()=>import("./maximize-5xe0gNYb.js"),__vite__mapDeps([8,9])),"./command-modules/minimize.ts":()=>n(()=>import("./minimize-Swn8NDS0.js"),__vite__mapDeps([10,9])),"./command-modules/reload.ts":()=>n(()=>import("./reload-Ec_7QxoJ.js"),__vite__mapDeps([])),"./command-modules/type.ts":()=>n(()=>import("./type-lgJe23De.js"),__vite__mapDeps([11,7])),"./command-modules/version.ts":()=>n(()=>import("./version-qD2Q3t0h.js"),__vite__mapDeps([]))}),`./command-modules/${e}.ts`)).default}catch{throw new Error(`unknown command: ${e}`)}l.set(e,t)}return l.get(e)}const p="command-history";class f{history;index=-1;constructor(){let t;try{t=JSON.parse(window.localStorage.getItem(p)||"[]")}catch{t=[]}this.history=Array.isArray(t)?t:[]}add(t){this.index=-1,t=t.trim(),this.history[0]!==t&&(this.history.unshift(t),window.localStorage.setItem(p,JSON.stringify(this.history)))}backward(){if(this.index+1<this.history.length)return this.index++,this.history[this.index]}forward(){if(this.index-1>=-1)return this.index--,this.index===-1?"":this.history[this.index]}}const u=['"',"'"];function d(e){for(let t=0;t<u.length;t++){const s=u[t];if(e.at(0)===s&&e.at(-1)===s)return e.slice(1,-1).replaceAll(new RegExp(`\\\\${s}`,"g"),s)}return e}const I=/^(--?[^\s"']+=)?("(\\"|[^"])*"|'(\\'|[^'])*'|\S+)/,L=/^--?\S/,A=/^-[a-z]=/i,P=/^-[a-z]+$/i,w=/^--[a-z][\da-z]*([_-][a-z][\da-z]*)*/i;function g(e){e=e.trim();const t={inputs:[],options:{}},s=[];let o=null;for(;e.length>0;){const i=(o=e.match(I))===null?e:o[0];s.push(i),e=e.slice(i.length).trim()}for(let i=0;i<s.length;i++){const r=s[i].trim();if(L.test(r)){if(o=r.match(A))t.options[r.charAt(1).toLowerCase()]=d(r.slice(3));else if(o=r.match(P)){const m=[...o[0].slice(1).toLowerCase()];for(let a=0;a<m.length;a++)t.options[m[a]]=!0}else if(o=r.match(w)){const m=r.slice(2,o[0].length).toLowerCase(),a=r.charAt(o[0].length)==="="?d(r.slice(o[0].length+1)):!0;t.options[m]=a}}else t.inputs.push(d(r))}return t}const c="command-in-progress";let C=0;class D extends HTMLElement{outputsElement=document.createElement("div");promptElement=document.createElement("div");labelElement=document.createElement("label");inputElement=document.createElement("input");history=new f;inputId=`prompt-input${++C}`;constructor(){super()}connectedCallback(){this.outputsElement.classList.add("outputs"),this.promptElement.classList.add("prompt"),this.labelElement.classList.add("prompt-label"),this.labelElement.setAttribute("for",this.inputId),this.inputElement.classList.add("prompt-input"),this.inputElement.id=this.inputId,this.inputElement.type="text",this.inputElement.addEventListener("keypress",t=>this.onPromptKeyPress(t)),this.inputElement.addEventListener("keydown",t=>this.onPromptKeyDown(t)),this.append(this.outputsElement),this.promptElement.append(this.labelElement),this.promptElement.append(this.inputElement),this.append(this.promptElement)}outputText(t){this.addOutput({type:"text",content:t})}outputError(t){this.addOutput({type:"error",content:`${t.message||t}`})}clearOutput(){this.outputsElement.innerHTML=""}get commandIsInProgress(){return this.classList.contains(c)}addOutput({type:t,content:s}){const o=document.createElement("div");if(o.classList.add("output",`is-${t}`),t==="text")o.innerHTML=s;else if(t==="command"){const i=document.createElement("span");i.classList.add("command-input"),i.textContent=s,o.append(i)}else o.textContent=s;this.outputsElement.append(o),this.inputElement.scrollIntoView()}onPromptKeyPress(t){if(t.key==="Enter"&&(t.preventDefault(),!this.commandIsInProgress)){const s=this.inputElement.value;this.inputElement.value="",this.parseInput(s)}}onPromptKeyDown(t){if(t.key==="ArrowUp"||t.key==="ArrowDown"){let s;t.key==="ArrowUp"?s=this.history.backward():t.key==="ArrowDown"&&(s=this.history.forward()),typeof s=="string"&&(t.preventDefault(),this.inputElement.value=s)}}parseInput(t){t=t.trim();let s=t.search(/\s|$/);s=s>0?s:t.length;const o=t.slice(0,s);if(o.length===0)return;const i=t.slice(s).trim();this.onCommandStart(t),this.runCommand(o,i).catch(r=>this.outputError(r)).finally(()=>this.onCommandEnd())}async runCommand(t,s){const{handler:o}=await y(t);if(typeof o=="string")return this.outputText(o);const i=g(s);return o(this,i)}onCommandStart(t){this.addOutput({type:"command",content:`${t}`}),this.history.add(t),this.classList.add(c)}onCommandEnd(){this.classList.remove(c)}}const S=Object.freeze(Object.defineProperty({__proto__:null,CommandPrompt:D},Symbol.toStringTag,{value:"Module"}));export{E as C,v as P,S as c,y as g};
//# sourceMappingURL=command-prompt-MxVgZGb0.js.map
function __vite__mapDeps(indexes) {
  if (!__vite__mapDeps.viteFileDeps) {
    __vite__mapDeps.viteFileDeps = ["assets/color-theme-H0hR7A1t.js","assets/index-JZR1_N_v.js","assets/index-8snfip3B.css","assets/commands-sjpjJy-n.js","assets/get-command-aliases-iwdB-Wxb.js","assets/dynamic-import-helper-0gtGTknh.js","assets/man-1iwAyI3J.js","assets/render-output-XRwz_Qpj.js","assets/maximize-5xe0gNYb.js","assets/resize-terminal-view-9Q6q31pv.js","assets/minimize-Swn8NDS0.js","assets/type-lgJe23De.js"]
  }
  return indexes.map((i) => __vite__mapDeps.viteFileDeps[i])
}