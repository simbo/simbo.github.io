import{S as T,a as y,b as m}from"./index-JVe8R7CI.js";const c=23,u="has-cursor",d=/<span\s+code="(\d+|stop)"[^>]*><\/span>/gi,E=/^\^(\d+|stop)/i,f=/^<br\s*\/?>/i;class D extends HTMLElement{steps=[];nextStep=0;typeDelay;typeTimeout=0;constructor(){super()}connectedCallback(){this.typeDelay=Number.parseInt(this.getAttribute("type-delay")||"0",10)||c}startTyping(){this.classList.add(u),this.dispatchEvent(new CustomEvent(T)),this.type()}stopTyping(){this.clearTimeout(),this.classList.remove(u),this.dispatchEvent(new CustomEvent(y))}resetTyping(){this.stopTyping(),this.nextStep=0,this.innerHTML=""}restartTyping(){this.resetTyping(),this.startTyping()}get isTyping(){return this.typeTimeout!==0}get typingDone(){return this.steps.length===this.nextStep}queueContent(t){t=t.split(/[\n\r]+/g).map(e=>e.trim()).join("").replaceAll(d,(e,s)=>`^${s}`);let i=this.steps.at(-1)?.output||"",n=0,p=!1;const o=e=>{t=t.slice(e)},a=e=>{i+=t.slice(0,e),o(e)},r=()=>{const e={pauseDuration:n,output:i};p&&(e.stopAfterwards=p),this.steps.push(e),n=0,p=!1};for(;t.length>0;){const e=t.charAt(0);let s=null,h;if(e==="^"&&(s=t.match(E)))s[0].toLowerCase()==="^stop"?p=!0:n+=Number.parseInt(s[0].slice(1),10),o(s[0].length);else if(e==="<"){let l=null;(l=t.match(f))?(a(l[0].length),r()):(h=t.indexOf(">"))>=0&&a(h+1)}else e==="&"&&(h=t.indexOf(";"))>=0?a(h+1):(a(1),r())}}type(){const t=this.steps[this.nextStep];this.setTimeout(()=>{this.innerHTML=t.output,this.nextStep++,!t.stopAfterwards&&this.nextStep<this.steps.length?this.setTimeout(()=>this.type(),this.humanizedDelay):(t.stopAfterwards&&this.dispatchEvent(new CustomEvent(m)),this.stopTyping())},t.pauseDuration)}get humanizedDelay(){return(Math.random()*this.typeDelay-Math.random()*this.typeDelay)/2+this.typeDelay}setTimeout(t,i=0){this.typeTimeout=window.setTimeout(t,i)}clearTimeout(){this.typeTimeout&&(window.clearTimeout(this.typeTimeout),this.typeTimeout=0)}}export{D as TypedText};
//# sourceMappingURL=typed-text--_l4mHXL.js.map
