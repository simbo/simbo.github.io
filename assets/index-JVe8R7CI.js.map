{"version":3,"mappings":"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","names":["STOPPED_TYPING_EVENT_TYPE","STARTED_TYPING_EVENT_TYPE","STOPPER_TYPED_EVENT_TYPE","ColorThemeValue","DEFAULT_COLOR_THEME_VALUE","COLOR_THEME_STORAGE_KEY","userPrefersColorScheme","scheme","setTheme","theme","ColorTheme","storedTheme","matches","DEFAULT_EVENT_SUBSCRIPTION_OPTIONS","eventSubscribe","element","type","handler","options","skip","once","tagName","unsubscribe","onEvent","eventCount","event","INITIAL_CONTENT_CLASS","ADDITIONAL_CONTENT_CLASS","typedText","typedContent","__vitePreload","n","CommandPrompt","_event","TypedText","SvgIcon","ColorThemeToggle"],"sources":["../../src/components/typed-text/typed-text-events.ts","../../src/lib/color-theme.ts","../../src/lib/event-subscribe.ts","../../src/index.ts"],"sourcesContent":["export const STOPPED_TYPING_EVENT_TYPE = 'stopped-typing';\nexport const STARTED_TYPING_EVENT_TYPE = 'started-typing';\nexport const STOPPER_TYPED_EVENT_TYPE = 'stopper-typed';\n","export enum ColorThemeValue {\n  Light = 'light',\n  Dark = 'dark'\n}\n\nconst DEFAULT_COLOR_THEME_VALUE = ColorThemeValue.Light;\nconst COLOR_THEME_STORAGE_KEY = 'color-theme';\n\nfunction userPrefersColorScheme(scheme: 'light' | 'dark'): boolean {\n  return window.matchMedia(`(prefers-color-scheme: ${scheme})`).matches;\n}\n\nfunction setTheme(theme?: string): void {\n  const themeValues = Object.values(ColorThemeValue);\n  if (!themeValues.includes(theme as ColorThemeValue)) {\n    return;\n  }\n  document.documentElement.dataset.colorTheme = theme;\n  window.localStorage.setItem(COLOR_THEME_STORAGE_KEY, theme as string);\n}\n\nexport const ColorTheme = {\n  initialize(): void {\n    const storedTheme = window.localStorage.getItem(COLOR_THEME_STORAGE_KEY);\n    let theme: string | undefined;\n    if (storedTheme) {\n      theme = storedTheme;\n    } else if (userPrefersColorScheme(ColorThemeValue.Dark)) {\n      theme = ColorThemeValue.Dark;\n    } else if (userPrefersColorScheme(ColorThemeValue.Light)) {\n      theme = ColorThemeValue.Light;\n    } else {\n      theme = DEFAULT_COLOR_THEME_VALUE;\n    }\n    setTheme(theme);\n    window\n      .matchMedia('(prefers-color-scheme: dark)')\n      .addEventListener('change', ({ matches }) => setTheme(matches ? ColorThemeValue.Dark : ColorThemeValue.Light));\n  },\n\n  toggle(): void {\n    setTheme(\n      document.documentElement.dataset.colorTheme === ColorThemeValue.Dark\n        ? ColorThemeValue.Light\n        : ColorThemeValue.Dark\n    );\n  },\n\n  get theme(): string {\n    return (document.documentElement.dataset.colorTheme as ColorThemeValue) || DEFAULT_COLOR_THEME_VALUE;\n  },\n\n  set theme(theme: string) {\n    setTheme(theme);\n  }\n};\n","export type EventHandler = (event: Event, unsubscribe: () => void) => void;\n\nexport interface EventSubscription {\n  unsubscribe(): void;\n}\n\nexport interface EventSubscriptionOptions {\n  skip: number;\n  once: boolean;\n  tagName?: string;\n}\n\nconst DEFAULT_EVENT_SUBSCRIPTION_OPTIONS: EventSubscriptionOptions = {\n  skip: 0,\n  once: false\n};\n\nexport function eventSubscribe(\n  element: Element,\n  type: string,\n  handler: EventHandler,\n  options: Partial<EventSubscriptionOptions> = {}\n): EventSubscription {\n  const { skip, once, tagName } = { ...DEFAULT_EVENT_SUBSCRIPTION_OPTIONS, ...options } as EventSubscriptionOptions;\n  const unsubscribe = () => element.removeEventListener(type, onEvent);\n  let eventCount = 0;\n  const onEvent = (event: Event) => {\n    if (!tagName || tagName.toLowerCase() === (event.target as HTMLElement | undefined)?.tagName?.toLowerCase()) {\n      if (eventCount >= skip) {\n        if (once) unsubscribe();\n        handler(event, unsubscribe);\n      }\n      eventCount++;\n    }\n  };\n  element.addEventListener(type, onEvent);\n  return { unsubscribe };\n}\n","import './index.scss';\n\nimport { TypedText } from './components/typed-text/typed-text';\nimport { STARTED_TYPING_EVENT_TYPE, STOPPER_TYPED_EVENT_TYPE } from './components/typed-text/typed-text-events';\nimport { ColorTheme } from './lib/color-theme';\nimport { eventSubscribe } from './lib/event-subscribe';\n\nColorTheme.initialize();\n\nconst INITIAL_CONTENT_CLASS = 'has-initial-content';\nconst ADDITIONAL_CONTENT_CLASS = 'has-additional-content';\n\nconst typedText = document.querySelector('typed-text') as TypedText;\nconst typedContent = typedText.innerHTML;\ntypedText.innerHTML = '';\n\neventSubscribe(\n  typedText,\n  STARTED_TYPING_EVENT_TYPE,\n  () => {\n    import('./components/command-prompt/command-prompt').then(({ CommandPrompt }) => {\n      customElements.define('command-prompt', CommandPrompt);\n    });\n  },\n  { once: true }\n);\n\neventSubscribe(\n  typedText,\n  STARTED_TYPING_EVENT_TYPE,\n  (_event, unsubscribe) => {\n    if (typedText.textContent?.includes('~ simbo')) {\n      typedText.classList.add(ADDITIONAL_CONTENT_CLASS);\n      typedText.classList.remove(INITIAL_CONTENT_CLASS);\n      unsubscribe();\n    }\n  },\n  { skip: 1 }\n);\n\neventSubscribe(\n  typedText,\n  STOPPER_TYPED_EVENT_TYPE,\n  () => {\n    typedText.classList.add(INITIAL_CONTENT_CLASS);\n  },\n  { once: true }\n);\n\neventSubscribe(\n  typedText,\n  'click',\n  event => {\n    event.preventDefault();\n    if (typedText.classList.contains(INITIAL_CONTENT_CLASS)) {\n      typedText.startTyping();\n    }\n  },\n  { tagName: 'button' }\n);\n\nimport('./components/typed-text/typed-text').then(({ TypedText }) => {\n  customElements.define('typed-text', TypedText);\n  typedText.queueContent(typedContent);\n  typedText.startTyping();\n});\n\nimport('./components/svg-icon/svg-icon').then(({ SvgIcon }) => {\n  customElements.define('svg-icon', SvgIcon);\n});\n\nimport('./components/color-theme-toggle/color-theme-toggle').then(({ ColorThemeToggle }) => {\n  customElements.define('color-theme-toggle', ColorThemeToggle);\n});\n"],"file":"assets/index-JVe8R7CI.js"}